/*!
 * Name: tagselector.js
 * Author: Ryan Fitzgerald
 * Version: 0.0.1
 * Repo: https://github.com/RyanFitzgerald/tagselector
 * Issues: https://github.com/RyanFitzgerald/tagselector/issues
 * License: MIT
 */
!function(e,t){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.TagSelector=t()}(this,function(){"use strict";function e(e){if("object"==typeof e){var t={};return Object.keys(p).forEach(function(n){e[n]?t[n]=e[n]:t[n]=p[n]}),t}}function t(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function n(){for(var e=l.options,t={},n=0;n<e.length;n++)t[e[n].value]={text:e[n].text,index:n,selected:e[n].selected};return t}function o(e,t){return(""+e.className).indexOf(" "+t)>-1}function i(e,t){e.className=e.className.replace(t,"")}function c(){var e=this.dataset.tagkey,t=f[e].index;if(o(this,"active")){i(this," active");var n=d.indexOf(e);n>-1&&d.splice(n,1),l.options[t].selected=!1,r.onDeselect&&"function"==typeof r.onDeselect&&r.onDeselect(e,f[e].text)}else if(this.className+=" active",d.push(e),l.options[t].selected=!0,r.onSelect&&"function"==typeof r.onSelect&&r.onSelect(e,f[e].text),r.max&&d.length>r.max){var c=f[d[0]].index;l.options[c].selected=!1,i(u.querySelector('.active[data-tagkey="'+d[0]+'"]')," active"),d.shift(),r.onDeselect&&"function"==typeof r.onDeselect&&r.onDeselect(d[0],f[d[0]].text)}}function s(){l.setAttribute("multiple",!0),f=n(),(u=document.createElement("div")).className="tagselector-wrap",l.style.display="none",t(u,l),Object.keys(f).forEach(function(e,t){var n=document.createElement("span");n.className="tagselector-tag",n.innerHTML=f[e].text,n.dataset.tagkey=e,n.dataset.tag=t,f[e].selected&&(n.className+=" active",d.push(e)),n.addEventListener("click",c),u.appendChild(n)})}function a(t,n){(l=document.getElementById(t)||!1)&&"SELECT"===l.tagName?(r=void 0!==n?e(n):p,s(),r.onInit&&"function"==typeof r.onInit&&r.onInit()):console.error("Error: Must provide a valid ID for select field")}var r,l,f,u,d=[],p={max:!1,onInit:!1,onDestroy:!1,onSelect:!1,onDeselect:!1};return a.prototype.destroy=function(){l.style.display="initial",u.parentNode.removeChild(u),l=!1,f=!1,d=[],(r=!1).onDestroy&&"function"==typeof r.onDestroy&&r.onDestroy()},a});